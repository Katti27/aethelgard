/* ============================================================
   Flowershow Cloud — Obsidian ITS-inspired (DARK ONLY) + Fonts
   ============================================================
   This file recreates the *look* of Obsidian + ITS inside
   Flowershow's HTML layout + Tailwind Typography (.prose).

   Fonts:
   - Inter (body)
   - Fira Code (mono)
   - Suez One (heading serif used in ITS stacks)

   If you prefer self-hosting fonts instead of Google Fonts:
   - Remove the @import line
   - Add @font-face rules pointing to /fonts/*.woff2 in your repo.
   ============================================================ */

/* IMPORTANT: @import must come before all other rules. */
@import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Fira+Code:wght@400;500;600&family=Suez+One&display=swap");

/* -----------------------------
   1) Dark tokens (ITS-like)
------------------------------ */
:root,
html,
body,
html[data-theme],
body[data-theme] {
  /* Force dark even if the app toggles attributes */
  color-scheme: dark;

  /* Obsidian/ITS canvas */
  --its-topbar: #0b0f13;
  --its-app-bg: #252c36;
  --its-note-bg: #1a1e24;
  --its-panel-bg: #11151d;

  /* Text */
  --its-text: #cfd7dd;
  --its-muted: #97a1b9;
  --its-faint: #4e5b6f;

  /* Accents */
  --its-h1: #c14343;         /* red */
  --its-link: #61afef;       /* bright blue */
  --its-em: #e79c5d;         /* orange italics */
  --its-accent: #863737;     /* deep red */
  --its-rule: #2f3b4d;

  /* Code */
  --its-code-bg: #232831;
  --its-code-inline: #fa4545;

  /* Fonts */
  --its-font: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji", sans-serif;
  --its-mono: "Fira Code", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  --its-heading: "Suez One", "Calisto MT", "Palatino Black", "Book Antiqua", Georgia, serif;

  /* UI */
  --its-radius: 10px;
  --its-radius-lg: 14px;
  --its-shadow-soft: 0 10px 22px rgba(0,0,0,.22);
  --its-focus: color-mix(in oklab, var(--its-link) 45%, transparent);
  --its-active-bg: rgba(193, 67, 67, 0.18);
}

html, body {
  background: var(--its-app-bg) !important;
  color: var(--its-text);
  font-family: var(--its-font);
}

::selection { background: rgba(122, 20, 20, 0.40); }

/* Focus */
:where(a, button, summary, input, textarea, select):focus-visible {
  outline: 3px solid var(--its-focus);
  outline-offset: 3px;
  border-radius: 10px;
}

/* Links */
a {
  color: var(--its-link);
  text-decoration: underline;
  text-underline-offset: 3px;
}
a:hover { color: color-mix(in oklab, var(--its-link) 78%, var(--its-h1)); }

/* -----------------------------
   2) Chrome: top bar / sidebars
   (best-effort selectors for Flowershow layout)
------------------------------ */
:where(header, nav, .site-navbar, body > header, body > nav) {
  background: var(--its-topbar) !important;
  border-bottom: 1px solid var(--its-rule);
}

/* Sidebars (left nav + right TOC both use aside on many themes) */
:where(aside, .site-sidebar) {
  background: var(--its-topbar) !important;
  border-right: 1px solid var(--its-rule);
}

/* Panels (some themes render right TOC in a card) */
:where(aside) :where(section, .card, [class*="panel"]) {
  background: transparent;
}

/* Sidebar & TOC links */
:where(nav, aside) a {
  color: color-mix(in oklab, var(--its-muted) 85%, var(--its-link));
  text-decoration: none;
}
:where(nav, aside) a:hover {
  color: var(--its-link);
  text-decoration: underline;
  text-underline-offset: 3px;
}

/* Active entry */
:where(nav, aside) a[aria-current="page"],
:where(nav, aside) a[aria-current="true"] {
  color: var(--its-text);
  font-weight: 700;
  background: var(--its-active-bg);
  border-left: 3px solid var(--its-h1);
  padding-left: 0.55rem;
  border-radius: 6px;
}

/* Search inputs */
:where(header, nav, aside) :where(input, textarea) {
  background: rgba(0,0,0,0.35);
  color: var(--its-text);
  border: 1px solid color-mix(in oklab, var(--its-rule) 70%, transparent);
  border-radius: 8px;
}

/* -----------------------------
   3) Main "note" surface
------------------------------ */
/* Many Flowershow themes wrap markdown in article/.prose */
:where(main) :where(article, .prose, .markdown, .content) {
  background: var(--its-note-bg);
  border: 1px solid color-mix(in oklab, var(--its-rule) 75%, transparent);
  border-radius: var(--its-radius-lg);
  box-shadow: var(--its-shadow-soft);

  /* Obsidian-like padding */
  padding: 1.75rem 2rem;
  max-width: 980px;
}

/* Nudge overall reading feel closer to Obsidian */
.prose {
  font-family: var(--its-font);
  line-height: 1.62;
  font-size: 1rem;

  /* Tailwind Typography tokens */
  --tw-prose-body: var(--its-text);
  --tw-prose-headings: var(--its-text);
  --tw-prose-links: var(--its-link);
  --tw-prose-bullets: var(--its-muted);
  --tw-prose-counters: var(--its-muted);
  --tw-prose-hr: var(--its-rule);
  --tw-prose-quotes: var(--its-text);
  --tw-prose-quote-borders: var(--its-rule);
  --tw-prose-captions: var(--its-muted);
  --tw-prose-code: var(--its-code-inline);
  --tw-prose-pre-bg: var(--its-code-bg);
  --tw-prose-th-borders: var(--its-rule);
  --tw-prose-td-borders: var(--its-rule);
}

/* -----------------------------
   4) Headings: match your Obsidian screenshot
------------------------------ */
.prose :where(h1, h2, h3, h4, h5, h6) {
  font-family: var(--its-heading);
  letter-spacing: 0.01em;
}

/* H1: red, uppercase, centered */
.prose h1 {
  color: var(--its-h1);
  text-transform: uppercase;
  letter-spacing: 0.06em;
  font-weight: 800;
  text-align: center;
  font-size: clamp(1.9rem, 2.7vw, 2.55rem);
  margin: 0.2rem 0 1.15rem;
}

/* H2/H3: bright blue (ITS), H2 uppercase */
.prose h2,
.prose h3 {
  color: var(--its-link);
  font-weight: 800;
}

.prose h2 {
  text-transform: uppercase;
  font-size: clamp(1.25rem, 2.0vw, 1.7rem);
  padding-bottom: 0.35rem;
  border-bottom: 2px solid color-mix(in oklab, var(--its-h1) 55%, var(--its-rule));
  margin-top: 2.0rem;
}

.prose h3 {
  font-size: 1.18rem;
  margin-top: 1.35rem;
}

/* Orange italic in headings (your “( … )” text) */
.prose :where(h1, h2, h3, h4) em {
  color: var(--its-em);
  font-style: italic;
  font-weight: 700;
  text-transform: none;
}

/* -----------------------------
   5) Rules / separators
------------------------------ */
.prose hr {
  border: none;
  height: 2px;
  background: linear-gradient(to right, transparent, rgba(193, 67, 67, 0.55), transparent);
  margin: 2rem 0;
}

/* -----------------------------
   6) Code
------------------------------ */
.prose :not(pre) > code {
  font-family: var(--its-mono);
  background: color-mix(in oklab, var(--its-code-bg) 70%, var(--its-note-bg) 30%);
  color: var(--its-code-inline);
  border: 1px solid color-mix(in oklab, var(--its-rule) 70%, transparent);
  border-radius: 8px;
  padding: 0.12em 0.35em;
}

.prose pre {
  background: var(--its-code-bg) !important;
  border: 1px solid color-mix(in oklab, var(--its-rule) 75%, transparent);
  border-radius: var(--its-radius-lg);
  box-shadow: var(--its-shadow-soft);
}
.prose pre code {
  font-family: var(--its-mono);
  color: var(--its-text);
}

/* -----------------------------
   7) Blockquotes / tables / images
------------------------------ */
.prose blockquote {
  background: var(--its-panel-bg);
  border-left: 4px solid var(--its-accent);
  border-radius: var(--its-radius);
  padding: 0.85rem 1rem;
}

.prose table {
  border-collapse: separate;
  border-spacing: 0;
  border: 1px solid color-mix(in oklab, var(--its-rule) 80%, transparent);
  border-radius: var(--its-radius-lg);
  overflow: hidden;
  box-shadow: var(--its-shadow-soft);
}
.prose thead th {
  background: #283345;
  color: var(--its-text);
  border-bottom: 1px solid var(--its-rule);
}
.prose tbody tr:nth-child(2n) td {
  background: color-mix(in oklab, var(--its-note-bg) 86%, #000 14%);
}

.prose img {
  border-radius: var(--its-radius-lg);
  box-shadow: var(--its-shadow-soft);
}

/* -----------------------------
   8) Scrollbars (Chromium/WebKit)
------------------------------ */
*::-webkit-scrollbar { width: 10px; height: 10px; }
*::-webkit-scrollbar-thumb {
  background: rgba(255,255,255,0.14);
  border-radius: 999px;
  border: 2px solid transparent;
  background-clip: content-box;
}
*::-webkit-scrollbar-thumb:hover { background: rgba(255,255,255,0.22); }

/* -----------------------------
   9) Mobile
------------------------------ */
@media (max-width: 640px) {
  :where(main) :where(article, .prose, .markdown, .content) {
    padding: 1.2rem 1.05rem;
    border-radius: 12px;
  }
}
