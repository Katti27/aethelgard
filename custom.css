/* ============================================================
   Flowershow Cloud — ITS Theme (Dark-only)
   - Designed to mimic Obsidian ITS dark palette & typography
   - Works with Flowershow's markdown wrapper (.prose) and common
     layout containers (navbar/sidebar) using broad selectors.

   Usage:
   1) Put this file at your repo root as: custom.css
   2) Put config.json at your repo root (or publish root)
   3) In config.json, set theme.defaultMode="dark" and hide switch
   ============================================================ */

/* -----------------------------
   1) ITS Dark Tokens (from your Obsidian ITS theme)
------------------------------ */
:root,
html[data-theme="dark"],
[data-theme="dark"],
html[data-theme="light"],
[data-theme="light"] {
  /* Force dark presentation even if something sets data-theme="light" */
  color-scheme: dark;

  /* Core palette */
  --its-outer-bar: #0b0f13;          /* top bar / outer chrome */
  --its-bg: #252c36;                 /* app background */
  --its-note: #1a1e24;               /* note/page surface */
  --its-aside-bg: #11151d;           /* callout/aside surface */
  --its-text: #cfd7dd;
  --its-soft-text: #97a1b9;
  --its-faint-text: #4e5b6f;

  /* Accents */
  --its-headers: #c14343;            /* headings */
  --its-accent: #863737;             /* primary accent */
  --its-accent-dark: #652121;        /* button/active */
  --its-accent-deep: #3f1010;        /* deepest */
  --its-link: #61afef;               /* links */
  --its-highlight: #7a141466;        /* selection / highlight */

  /* UI */
  --its-hr: #2f3b4d;
  --its-outline: var(--its-outer-bar);
  --its-table: #283345;
  --its-td: #06080c60;
  --its-th: var(--its-accent-dark);

  /* Code */
  --its-code-bg: #232831;
  --its-code-text: #fa4545;

  /* Typography */
  --its-font-default: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";
  --its-font-mono: "Fira Code", "Fira Code Medium", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;

  /* Radii / shadows (Obsidian-like) */
  --its-radius-sm: 8px;
  --its-radius: 12px;
  --its-radius-lg: 16px;
  --its-shadow: 0 10px 30px rgba(0, 0, 0, 0.35);
  --its-shadow-soft: 0 10px 24px rgba(0, 0, 0, 0.22);

  /* Focus ring */
  --its-focus: color-mix(in oklab, var(--its-link) 45%, transparent);
}

/* -----------------------------
   2) Global base
------------------------------ */
html, body {
  background: var(--its-bg);
  color: var(--its-text);
  font-family: var(--its-font-default);
}

/* Subtle ITS-ish background depth */
body {
  background:
    radial-gradient(1200px 800px at 20% 0%, rgba(193, 67, 67, 0.12), transparent 60%),
    radial-gradient(1000px 700px at 90% 10%, rgba(97, 175, 239, 0.10), transparent 55%),
    var(--its-bg);
}

::selection { background: var(--its-highlight); }

/* Better focus */
:where(a, button, summary, input, textarea, select):focus-visible {
  outline: 3px solid var(--its-focus);
  outline-offset: 3px;
  border-radius: 10px;
}

/* Links */
a {
  color: var(--its-link);
  text-decoration: underline;
  text-underline-offset: 3px;
}
a:hover {
  color: color-mix(in oklab, var(--its-link) 80%, var(--its-headers));
}

/* -----------------------------
   3) Layout chrome (best-effort Flowershow selectors)
------------------------------ */
:where(.site-navbar, header, body > header, body > nav) {
  background: var(--its-outer-bar) !important;
  color: var(--its-text);
  border-bottom: 1px solid var(--its-hr);
}

:where(.site-sidebar, aside) {
  background: var(--its-outer-bar);
  border-right: 1px solid var(--its-hr);
}

/* Search / inputs in chrome */
:where(header, nav, aside) :where(input, textarea) {
  background: rgba(0, 0, 0, 0.30);
  border: 1px solid color-mix(in oklab, var(--its-hr) 70%, transparent);
  color: var(--its-text);
  border-radius: var(--its-radius-sm);
}

/* “Card” surfaces (try to catch page containers) */
:where(main, article, .content, .markdown, .prose) {
  color: var(--its-text);
}

/* If Flowershow wraps content in a main card, this helps */
:where(main) :where(article, .prose, .markdown, .content) {
  background: var(--its-note);
  border: 1px solid color-mix(in oklab, var(--its-hr) 70%, transparent);
  border-radius: var(--its-radius-lg);
  box-shadow: var(--its-shadow-soft);
}

/* -----------------------------
   4) Markdown typography (.prose)
------------------------------ */
.prose {
  --tw-prose-body: var(--its-text);
  --tw-prose-headings: var(--its-headers);
  --tw-prose-lead: var(--its-text);
  --tw-prose-links: var(--its-link);
  --tw-prose-bold: var(--its-text);
  --tw-prose-counters: var(--its-soft-text);
  --tw-prose-bullets: var(--its-soft-text);
  --tw-prose-hr: var(--its-hr);
  --tw-prose-quotes: var(--its-text);
  --tw-prose-quote-borders: var(--its-hr);
  --tw-prose-captions: var(--its-soft-text);
  --tw-prose-code: var(--its-code-text);
  --tw-prose-pre-code: var(--its-text);
  --tw-prose-pre-bg: var(--its-code-bg);
  --tw-prose-th-borders: var(--its-hr);
  --tw-prose-td-borders: var(--its-hr);

  font-family: var(--its-font-default);
}

/* Headings */
.prose :where(h1, h2, h3, h4) {
  letter-spacing: -0.015em;
}
.prose h1 { font-weight: 800; }
.prose h2 { border-bottom: 1px solid color-mix(in oklab, var(--its-hr) 70%, transparent); padding-bottom: 0.25rem; }

/* Inline code */
.prose :not(pre) > code {
  font-family: var(--its-font-mono);
  background: color-mix(in oklab, var(--its-code-bg) 70%, var(--its-note) 30%);
  color: var(--its-code-text);
  border: 1px solid color-mix(in oklab, var(--its-hr) 65%, transparent);
  border-radius: 8px;
  padding: 0.12em 0.35em;
}

/* Code blocks */
.prose pre {
  background: var(--its-code-bg) !important;
  border: 1px solid color-mix(in oklab, var(--its-hr) 70%, transparent);
  border-radius: var(--its-radius-lg);
  box-shadow: var(--its-shadow-soft);
}
.prose pre code {
  font-family: var(--its-font-mono);
  color: var(--its-text);
}

/* Blockquotes (ITS vibe) */
.prose blockquote {
  background: color-mix(in oklab, var(--its-aside-bg) 85%, transparent);
  border-left: 4px solid var(--its-accent);
  border-radius: var(--its-radius);
  padding: 0.85rem 1rem;
}

/* Tables */
.prose table {
  border-collapse: separate;
  border-spacing: 0;
  overflow: hidden;
  border: 1px solid color-mix(in oklab, var(--its-hr) 75%, transparent);
  border-radius: var(--its-radius-lg);
  box-shadow: var(--its-shadow-soft);
}
.prose thead th {
  background: var(--its-table);
  color: var(--its-text);
  border-bottom: 1px solid var(--its-hr);
}
.prose tbody td {
  background: color-mix(in oklab, var(--its-note) 82%, var(--its-td) 18%);
}
.prose tbody tr:hover td {
  background: color-mix(in oklab, var(--its-note) 70%, rgba(168, 60, 60, 0.25) 30%);
}

/* HR */
.prose hr { border-color: var(--its-hr); }

/* Images */
.prose img {
  border-radius: var(--its-radius-lg);
  box-shadow: var(--its-shadow-soft);
}

/* -----------------------------
   5) Callouts (remark-callouts / admonitions)
------------------------------ */
.callout,
.admonition {
  background: var(--its-aside-bg);
  border: 1px solid color-mix(in oklab, var(--its-hr) 75%, transparent);
  border-left: 4px solid var(--its-link);
  border-radius: var(--its-radius-lg);
  box-shadow: var(--its-shadow-soft);
  overflow: hidden;
}

.callout-title,
.admonition-title {
  padding: 0.75rem 0.95rem;
  background: color-mix(in oklab, var(--its-aside-bg) 80%, var(--its-outer-bar) 20%);
  border-bottom: 1px solid color-mix(in oklab, var(--its-hr) 75%, transparent);
  font-weight: 700;
}

.callout-content,
.admonition-content,
.callout > p,
.admonition > p {
  padding: 0.85rem 0.95rem;
}

/* -----------------------------
   6) Small polish
------------------------------ */
hr {
  border: none;
  height: 1px;
  background: linear-gradient(to right, transparent, var(--its-hr), transparent);
  margin: 1.25rem 0;
}

/* Scrollbar (Chromium/WebKit) */
*::-webkit-scrollbar { width: 10px; height: 10px; }
*::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.14);
  border-radius: 999px;
  border: 2px solid transparent;
  background-clip: content-box;
}
*::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.22);
  border: 2px solid transparent;
  background-clip: content-box;
}

/* Reduce motion */
@media (prefers-reduced-motion: reduce) {
  * { transition: none !important; scroll-behavior: auto !important; }
}
